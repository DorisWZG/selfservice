
{% extends "default_web/base.html" %}

    {% load staticfiles %}

    {% block title %}Glogou Product and Service{% endblock %}
    {% block description %}{% endblock %}
    {% block keyword %}{% endblock %}


    {% block content %}

    <!-- Page Content -->
    <div class="container">

        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Result for: {{ category_name }}
                    <small>Budget {{ budget }}</small>
                </h1>
            </div>
        </div>

        <!-- /.     row -->
        <div class="row">
            {% if metrics_result %}
            <table class="table table-striped" id="result-table">
                <tr>
                    <th>Suggested Channel</th>
                    <th>Budget Allocation</th>
                    <th>Expected Clicks</th>
                    <th>Average Cost per Click</th>
                    <th>Expected Impressions</th>
                    <th>Average Cost per Impression</th>
                </tr>
                {% for item in metrics_result %}
                    <tr>
                        <td>{{ item.channelId.channelName }}</td>
                        <td>{{ item.allocation }}</td>
                        <td>{{ item.expectedClicks }}</td>
                        <td>{{ item.costPerClick }}</td>
                        <td>{{ item.expectedImpressions }}</td>
                        <td>{{ item.costPerImpression }}</td>
                    </tr>
                {% endfor %}
            </table>
            {% endif %}
        </div>

        <div class="row">
            <div style="float: left"><a class="btn btn-primary" href="/budget_allocation/stage2_test/">
                <span class="glyphicon glyphicon-chevron-left"></span>Back</a></div>
        </div>
        <div class="col-lg-5" style="float: right">
            <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="selectCategory">Category</label>
                        <div class="col-sm-5">

                            <select id="selectCategory" class="form-control">
                                <option value=""> Please select your business sector... </option>
                                <!--
                                <option value="1"> Education Market </option>
                                <option value="2"> Destination Marketing </option>
                                <option value="3"> Real Estate </option>
                                <option value="4"> High Tech industry </option>
                                -->

                            </select>
                        </div>
                        <div class="col-sm-4">
                            <select id="selectSubCategory" class="form-control">
                                <option value="">Please select your sub business sector...</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="selectBudget">Budget</label>
                        <div class="col-sm-9">
                            <select id="selectBudget" class="form-control">
                                <option value="">Select one...</option>
                                <option value="1000">1,000</option>
                                <option value="2000">2,000</option>
                                <option value="3000">3,000-5,000</option>
                                <option value="5000">5,000-10,000</option>
                                <option value="10000">10,000-20,000</option>
                                <option value="20000">20,000-50,000</option>
                                <option value="50000">50,000-100,000</option>
                                <option value="100000">100,000+</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="selectGoal">Campaign Goal</label>
                        <div class="col-sm-9">
                            <select id="selectGoal" class="form-control">
                                <option value="">Select your goal</option>
                                <option value="click">I want to get more clicks after campaign</option>
                                <option value="impression">I want to get more impressions after campaign</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-9">
                        {#<a class="btn btn-primary" onclick="showResult();">See Result <span class="glyphicon glyphicon-chevron-right"></span></a>#}
                        <a id="see_result_button" class="btn btn-primary" onclick="showResultPage();">See Result <span class="glyphicon glyphicon-chevron-right"></span></a>
                        </div>
                    </div>
                </form>
        </div>
    </div>

    <script src="{% static 'javascript/testGetResult.js' %}"></script>
    <script>
    var url = "/budget_allocation/get_industryNameList";
    $.get(url).done(function(data) {
        var selectElem = $("#selectCategory");
        $(data).each(function(idx, category) {
            $("<option></option>").attr("value", category.industryName).html(category.industryName).appendTo(selectElem)
        });
    }).fail(function(data) {
        alert("Status Code: " + data.status + ", Status Text: " + data.statusText + ", Response Text: " + data.responseText);
    });
    var subCategory = "/budget_allocation/get_subIndustryList/industry/" + selectCategory;
    $get(subCategory).done(function(data) {
        var selectSubElem = $("selectSubCategory");
    $(data).each(function(idx,category) {
       $("<option></option>").attr("value",category.subIndustry).html(category.subIndustry).appendTo(selectSubElem)
    });
    }).fail(function (data) {
        alert(data);
    });
    </script>
    {% endblock %}
